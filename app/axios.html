<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>axios发送数据</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.16/vue.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script
</head>
<body>
<div id="app">
    <h1>axios</h1>
    <button @click="get">get发送数据</button>
    <button @click="post">post发送数据</button>
    <!--<button @click="jsonp">jsonp发送数据</button>-->
    <button @click="http">http发送</button>
    <br>
    <span>{{msg}}</span>
</div>
<script>
    var app = new Vue({
        el:'#app',
        data:{
            msg:'hello world'
        },
        mounted:function (){
            axios.interceptors.request.use(function (config) {
                // 在发送请求之前做些什么
                return config;
            }, function (error) {
                // 对请求错误做些什么
                return Promise.reject(error);
            });
            // 添加响应拦截器
            axios.interceptors.response.use(function (response) {
                // 对响应数据做点什么
                return response;
            }, function (error) {
                // 对响应错误做点什么
                return Promise.reject(error);
            });
        },
        methods:{
            get:function () {
                //https://api.douban.com/v2/movie/in_theaters?city=%E5%8C%97%E4%BA%AC&start=0&count=10
                axios.get('https://api.douban.com/v2/movie/in_theaters',{
                    params:{
                        city:'beijing'
                    },
                    headers:{
                        token:'token'
                    }
                }).then(function (res) {
                    this.msg = res;
                }).catch(function (error) {
                    this.msg = error;
                })
            },
            post:function () {
                axios.post('/user', {
                    firstName: 'Fred',
                    lastName: 'Flintstone'
                }).then(function (response) {
                        console.log(response);
                }).catch(function (error) {
                        console.log(error);
                });
            },
            http:function () {
                // 发送 POST 请求
                axios({
                    method: 'post',
                    url: '/user',
                    data: {
                        firstName: 'Fred',
                        lastName: 'Flintstone'
                    },
                    headers:{
                        token:'token'
                    }
                }).then(function (res) {
                    console.log(res)
                }).catch(function (error) {
                    console.log(error)
                })

            }
        }
    });
</script>
</body>
</html>